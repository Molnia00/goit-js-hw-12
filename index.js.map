{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n\n\n\n\nconst KeyMine = '47125427-ad9e927b7d4f8d8b2ea4266bf';\n\nlet currentQuery; \nlet currentPage;\n\n\n\n\n\n\nexport async function loadPhoto(query) {\n    console.log('queryUser', query);\n     currentQuery = query;\n     currentPage = 1;\n   return getPhotos()\n}\n\nfunction getPhotos() {\n     const promPixbay = axios.get('https://pixabay.com/api/',\n        {\n            params:\n            {\n        key: KeyMine,\n        q: currentQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: currentPage,\n        per_page: 15,\n    }});\n    return promPixbay\n}\n\nexport async function loadMore(){\n    currentPage++;\n    return getPhotos();\n}\n\n\n//if (!response.ok) {\n//     throw new Error(response.statusText);\n //  }\n  // return response.json()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","const list = document.querySelector('.list');\n\nexport function renderPhoto(data) {\n    list.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n\n}\n\nexport function clearList() {\n    list.innerHTML = '';\n}\n\n function createMarkup(arr) {\n    return arr.map(({ previewURL, tags , likes , views, downloads, comments, largeImageURL}) => \n        `<li class = \"card\">\n            <a href=\"${largeImageURL}\"><img src = \"${previewURL}\" alt = \"${tags}\" width = \"300px\"></a>      \n             <div class = \"bottomLine\">\n\n                <div class = \"col\">\n                    <div class = \"name\">Likes</div>\n                    <div class = \"value\">${likes}</div>\n                </div>\n\n                 <div class = \"col\">\n                    <div class = \"name\">Views</div>\n                    <div class = \"value\">${views}</div>\n                </div>\n\n                 <div class = \"col\">\n                    <div class = \"name\">Comments</div>\n                    <div class = \"value\">${comments}</div>\n                </div>\n\n                 <div class = \"col\">\n                    <div class = \"name\">Downloads</div>\n                    <div class = \"value\">${downloads}</div>\n                </div>\n\n            </div>\n        </li>`\n    ).join('')\n }\n\n\n ","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\n\nimport { loadPhoto , loadMore} from './js/pixabay-api'\n\nimport { renderPhoto, clearList } from './js/render-functions'\n\nconst btnMore = document.querySelector('.btnMore')\nconst inputSearch = document.querySelector('.inputSearch');\nconst btnSearch = document.querySelector('.btnSearch');\nconst loadingText = document.querySelector('.loading-text');\n\n\nlet lightbox;\nbtnMore.hidden = true;\n\nbtnSearch.addEventListener('click', getInfo);\nbtnMore.addEventListener('click' , clickForMore)\n\nasync function getInfo() {\n    \n    const searchStr = inputSearch.value;\n    console.log(searchStr);\n    clearInput();\n    clearList();\n\n    showLoad();\n    try {\n        const response = await loadPhoto(searchStr);\n        \n        hideLoad();\n            \n        if (response.data.hits.length === 0) {\n            iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n            return\n        }\n        btnMore.hidden = false;\n        renderPhoto(response.data);\n        lightbox= new SimpleLightbox('.list a', {\n            captionDelay: 250,\n            captionData: 'alt',\n            nav: true,\n\n\n        })\n        setTimeout(scrollDown, 1000);\n    }catch(error){\n            console.log('error', error);\n        }\n}\n /////////////////////////////////////////////////////////////\n\nasync function  clickForMore() {\n\n    showLoad();\n    try {\n        btnMore.hidden = true;\n        const response = await loadMore();\n        \n        hideLoad();\n            \n        if (response.data.hits.length === 0) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n            \n            return\n        }\n        btnMore.hidden = false;\n        renderPhoto(response.data);\n        lightbox= new SimpleLightbox('.list a', {\n            captionDelay: 250,\n            captionData: 'alt',\n            nav: true,\n\n\n        })\n        setTimeout(scrollDown, 1000)\n\n\n\n        \n    }catch(error){\n            console.log('error', error);\n        }\n}\n\n /////////////////////////////////////////////////////////////\n\n\nfunction showLoad() {\n    loadingText.innerHTML = 'Loading images, please wait...';\n}\n\nfunction hideLoad() {\n    loadingText.innerHTML = '';\n}\n\n\nfunction clearInput() {\n    inputSearch.value = '';\n\n}\n\n\nfunction scrollDown() {\n    const card = document.querySelector('.card');\n    const rect = card.getBoundingClientRect();\n    \n\n    const interval = setInterval(() => {\n  const scrollHeight = document.documentElement.scrollHeight;  \n  const scrollTop = document.documentElement.scrollTop;  \n  const clientHeight = document.documentElement.clientHeight;  \n\n  if (scrollTop + clientHeight >= scrollHeight) {\n      clearInterval(interval);\n  } else {\n      window.scrollBy({\n          top: rect.height * 2,\n          behavior: 'smooth'\n      }); \n  }\n}, 1000);\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":["KeyMine","currentQuery","currentPage","loadPhoto","query","getPhotos","axios","loadMore","list","renderPhoto","data","createMarkup","clearList","arr","previewURL","tags","likes","views","downloads","comments","largeImageURL","btnMore","inputSearch","btnSearch","loadingText","lightbox","getInfo","clickForMore","searchStr","clearInput","showLoad","response","hideLoad","iziToast","SimpleLightbox","scrollDown","error","rect","interval","scrollHeight","scrollTop","clientHeight"],"mappings":"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"}