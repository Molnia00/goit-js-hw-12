{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\n\n\n\n\nconst KeyMine = '47125427-ad9e927b7d4f8d8b2ea4266bf';\n\nlet currentQuery; \nlet currentPage;\n\nconst itemsPerPage = 15;\n\n\n\n//\n\nexport async function loadPhoto(query) {\n    console.log('queryUser', query);\n     currentQuery = query;\n     currentPage = 1;\n   return getPhotos()\n}\n\nfunction getPhotos() {\n     const promPixbay = axios.get('https://pixabay.com/api/',\n        {\n            params:\n            {\n        key: KeyMine,\n        q: currentQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: currentPage,\n        per_page: itemsPerPage,\n    }});\n    return promPixbay\n}\n\nexport async function loadMore(){\n    currentPage++;\n    return getPhotos();\n}\n\n\nexport function canLoadMore(totalHits) {\n    return totalHits - itemsPerPage * currentPage > 0 \n}\n\n\n//if (!response.ok) {\n//     throw new Error(response.statusText);\n //  }\n  // return response.json()\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","const list = document.querySelector('.list');\n\nexport function renderPhoto(data) {\n    list.insertAdjacentHTML('beforeend', createMarkup(data.hits));\n\n}\n\nexport function clearList() {\n    list.innerHTML = '';\n}\n\n function createMarkup(arr) {\n    return arr.map(({ previewURL, tags , likes , views, downloads, comments, largeImageURL}) => \n        `<li class = \"card\">\n            <a href=\"${largeImageURL}\"><img src = \"${previewURL}\" alt = \"${tags}\" width = \"300px\"></a>      \n             <div class = \"bottomLine\">\n\n                <div class = \"col\">\n                    <div class = \"name\">Likes</div>\n                    <div class = \"value\">${likes}</div>\n                </div>\n\n                 <div class = \"col\">\n                    <div class = \"name\">Views</div>\n                    <div class = \"value\">${views}</div>\n                </div>\n\n                 <div class = \"col\">\n                    <div class = \"name\">Comments</div>\n                    <div class = \"value\">${comments}</div>\n                </div>\n\n                 <div class = \"col\">\n                    <div class = \"name\">Downloads</div>\n                    <div class = \"value\">${downloads}</div>\n                </div>\n\n            </div>\n        </li>`\n    ).join('')\n }\n\n\n ","\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\n\nimport { loadPhoto , loadMore, canLoadMore} from './js/pixabay-api'\n\nimport { renderPhoto, clearList } from './js/render-functions'\n\nconst btnMore = document.querySelector('.btnMore')\nconst inputSearch = document.querySelector('.inputSearch');\nconst btnSearch = document.querySelector('.btnSearch');\nconst loadingText = document.querySelector('.loading-text');\nconst searchForm = document.querySelector('.search-form');\n\n\n\nlet lightbox;\nbtnMore.hidden = true;\n\nsearchForm.addEventListener('submit', getInfo);\nbtnMore.addEventListener('click' , clickForMore)\n\nasync function getInfo(event) {\n    \n   btnMore.hidden = true;\n\n    event.preventDefault();\n    const formData = new FormData(event.target);\n    const searchStr = formData.get('inputSearch').trim();\n\n    if (!searchStr) {\n        iziToast.warning({\n            title: 'Caution',\n            message: 'You forgot to write search. Please try again!',\n            position: 'topRight',\n        });\n        return\n    }\n\n       \n    console.log(searchStr);\n    clearInput();\n    clearList();\n\n    showLoad();\n    try {\n        const response = await loadPhoto(searchStr);\n        \n        hideLoad();\n            \n        if (response.data.hits.length === 0) {\n             iziToast.error({\n                title: 'Error',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                position: 'topRight',\n            });\n            return\n        }\n        if (canLoadMore(response.data.totalHits)) {\n            btnMore.hidden = false;\n        }\n        \n    \n        renderPhoto(response.data);\n        lightbox= new SimpleLightbox('.list a', {\n            captionDelay: 250,\n            captionData: 'alt',\n            nav: true,\n\n\n        })\n        \n    } catch (error) {\n        hideLoad();\n        console.log('error', error);\n                    \n        iziToast.error({\n        title: 'Error',\n         message: 'Something go wrong. Please try again!',\n         position: 'topRight',\n        });\n                \n        \n        }\n}\n /////////////////////////////////////////////////////////////\n\nasync function  clickForMore() {\n\n    showLoad();\n    try {\n        btnMore.hidden = true;\n        const response = await loadMore();\n        \n        hideLoad();\n            \n        if (response.data.hits.length === 0) {\n            btnMore.hidden = false;\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'topRight',\n            });\n            \n            return\n        }\n        if (canLoadMore(response.data.totalHits)) {\n            btnMore.hidden = false;\n        }\n        renderPhoto(response.data);\n        lightbox= new SimpleLightbox('.list a', {\n            captionDelay: 250,\n            captionData: 'alt',\n            nav: true,\n\n\n        })\n        setTimeout(scrollDown, 1000)\n\n\n\n        \n    }catch(error){\n            console.log('error', error);\n        }\n}\n\n /////////////////////////////////////////////////////////////\n\n\nfunction showLoad() {\n    loadingText.innerHTML = 'Loading images, please wait...';\n}\n\nfunction hideLoad() {\n    loadingText.innerHTML = '';\n}\n\n\nfunction clearInput() {\n    inputSearch.value = '';\n\n}\n\n\nfunction scrollDown() {\n    const card = document.querySelector('.card');\n    const rect = card.getBoundingClientRect();\n      window.scrollBy({\n          top: rect.height * 2 + 24,\n          behavior: 'smooth'\n      }); \n\n//     const interval = setInterval(() => {\n//   const scrollHeight = document.documentElement.scrollHeight;  \n//   const scrollTop = document.documentElement.scrollTop;  \n//   const clientHeight = document.documentElement.clientHeight;  \n\n//   if (scrollTop + clientHeight >= scrollHeight) {\n//       clearInterval(interval);\n//   } else {\n//       window.scrollBy({\n//           top: rect.height * 2,\n//           behavior: 'smooth'\n//       }); \n//   }\n// }, 1000);\n }\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":["KeyMine","currentQuery","currentPage","itemsPerPage","loadPhoto","query","getPhotos","axios","loadMore","canLoadMore","totalHits","list","renderPhoto","data","createMarkup","clearList","arr","previewURL","tags","likes","views","downloads","comments","largeImageURL","btnMore","inputSearch","loadingText","searchForm","lightbox","getInfo","clickForMore","event","searchStr","iziToast","clearInput","showLoad","response","hideLoad","SimpleLightbox","error","scrollDown","rect"],"mappings":"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"}